@page "/"
@inject Models.EmployeeContext DBContext



@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime
<input type="button" class="btn btn-primary" @onclick="synData" value="synData" />
<h1>Local Storage!</h1>

<input class="form-control" @bind="currentInputValue" />
<button class="btn btn-secondary" @onclick="Save">บันทึก</button>
<button class="btn btn-secondary" @onclick="Read">อ่าน</button>
<button class="btn btn-secondary" @onclick="Delete">ลบ</button>
@*test deploy   id test<h1>Hello, Bassam</h1>*@

<p>
    <a class="btn btn-secondary" href="addemp">Create New Employee</a>
</p>

@if (displayUserAddedToDB)
{
    <div class="row bg-success text-white" style="margin-top:10px; height:40px">
        <label class="p-2">User added to database... </label>
    </div>
}

<hr />


@*<div class="form-group row">
        <button class="btn btn-info float-right" @onclick="GetSavedEmployees">List All Employees</button>
    </div>*@
    @if (survey_profile_list != null)
{
    <div class="row">
        <div class="col-md-12">
     <table class="table-bordered">
        <thead>
            <tr>
                    <th>id</th>
                    <th>HC</th>
                    <th>survey_year</th>
                    <th>create_survey</th>
                    <th>survey_no</th>
                    <th>AGRI</th>
                    <th>AGRI_NO</th>
                    <th>MBNO</th>
                    <th>MB</th>
                    <th>MM</th>
                    <th>TMP</th>
                    <th>AMP</th>
                    <th>JUN</th>
                    <th>POSTCODE</th>
                    <th>PERSON</th>
                    <th>popid</th>
                    <th>PREFIX</th>
                    <th>TEL</th>
                    <th>HHM</th>
                    <th>PP</th>
                    <th>PPP</th> 
            </tr>
        </thead>
        <tbody>
            <Virtualize Context="survey_profile" Items="@survey_profile_list">
                <tr>
                    <td>@survey_profile.id</td>
                    <td> <a href='surveypageone/@survey_profile.HC' >@survey_profile.HC</a><br>
                    <a href='surveya2/@survey_profile.HC' >a2C</a>,
                    <a href='surveya3/@survey_profile.HC' >a2C</a>,
                    </td>
                    <td>@survey_profile.survey_year</td>
                    <td>@survey_profile.survey_no</td>
                    <td>@survey_profile.create_survey</td>
                    <td>@survey_profile.AGRI</td>
                    <td>@survey_profile.AGRI_NO</td>
                    <td>@survey_profile.MBNO</td>
                    <td>@survey_profile.MB</td>
                    <td>@survey_profile.MM</td>
                    <td>@survey_profile.TMP</td>
                    <td>@survey_profile.AMP</td>
                    <td>@survey_profile.JUN</td>
                    <td>@survey_profile.POSTCODE</td>
                    <td>@survey_profile.PERSON</td>
                    <td>@survey_profile.popid</td>
                    <td>@survey_profile.PREFIX</td>
                    <td>@survey_profile.TEL</td>
                    <td>@survey_profile.HHM</td>
                    <td>@survey_profile.PP</td>
                    <td>@survey_profile.PPP</td> 
                
                    <td>
                        <input type="button" class="btn btn-danger" @onclick="@(e => DeleteSurvey_profile(survey_profile.id))" value="Delete" />
                        <a href='editemployee/@survey_profile.id' class="btn btn-block">Edit</a>
                    </td>

                </tr>
            </Virtualize>
        </tbody>
    </table>
    </div>
    </div>
    }
@if (employees != null)
{
    <table class="table-bordered">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>E-mail</th>
                <th>Mobile number</th>
                <th>Server update</th>
                <th>Local update</th>
                <th>User</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <Virtualize Context="employee" Items="@employees">
                <tr>
                    <td>@employee.Id</td>
                    <td>@employee.Fullname</td>
                    <td>@employee.Email</td>
                    <td>@employee.MobileNumber</td>
                    <td>@employee.ServerUpdate</td>
                    <td>@employee.localUpdate</td>
                    <td>@employee.User</td>
                    <td>
                        <input type="button" class="btn btn-danger" @onclick="@(e => DeleteEmployee(employee.Id))" value="Delete" />
                        <a href='editemployee/@employee.Id' class="btn btn-block">Edit</a>
                    </td>

                </tr>
            </Virtualize>
        </tbody>
    </table>
}
