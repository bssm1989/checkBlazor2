@page "/Surveya1"
@inject Models.EmployeeContext DBContext

@using FirstBlazorApp.Models
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime


<form name='surway' method='POST' action='surveya1_add.php'>
<br>
<div class="row" style='border-style: dotted;border-width: 1px'>
		<div class="col-lg-12">
		<label for="firstName"><b>ตอนที่ 1 ข้อมูลสมาชิกในครัวเรือน (ทุนมนุษย์) (1/5)  (หน้าที่ 2/20)</b></label>
		<label for="firstName">ไม่สำรวจข้อมูลบุคคลที่มีชื่อตามทะเบียนบ้านแต่ไม่ได้พักอาศัยอยู่ในบ้านโดยไม่มีการติดต่อใด ๆ กับครัวเรือนมาแล้วเป็นเวลาไม่น้อยกว่า 3 ปี</label>
	</div>
</div>
<br>
<div class="row" style='border-style: dotted;border-width: 1px'>
		<div class="col-lg-12">
		<label><b><font size='6' color='red'>HC : <?php $HC=$_SESSION["HC"];echo$HC?></font></b></label>
	</div>
</div>
<?php
$mysqli=mcon($mysql["host"], $mysql["user"], $mysql["pass"], $mysql["dbname"],$mysql["charset"]);

$query_up="select ch1_st from survey_staff where  HC='$HC' and survey_year='$survey_year' and survey_no='$survey_no'";
$result_up=$mysqli->query($query_up);
$row_up=$result_up->fetch_object();
if($row_up->ch1_st==0){
	$query_up1="update survey_staff set ch1_st='".date("U")."' where  HC='$HC' and survey_year='$survey_year' and survey_no='$survey_no'";
	$result_up1=$mysqli->query($query_up1);
}

$query="select PP,HHM from survey_profile where HC='$HC' and survey_year='$survey_year' and survey_no='$survey_no'";
$result=$mysqli->query($query);
$row=$result->fetch_object();
$count=$row->HHM;

//background-color
for($i=1;$i<=$count;$i++){//for($i=1;$i<=$count;$i++){
	$background=($background=='#FFEFFF')?"#EFFFFF":"#FFEFFF";
	$query1="select a2,a3,a4,a5,a6,popid,a2_b from survey_a1 where HC='$HC' and a1='$i' and survey_year='$survey_year' and survey_no='$survey_no'";
	$result1=$mysqli->query($query1);
	$row1=$result1->fetch_object();
?>
<br>
<input type='hidden' value='<?php echo$i?>' name='a1[<?php echo$i?>]'>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="a2[<?php echo$i?>]"><h3><font color="blue">คนที่ <?php echo$i?></font> (อยู่ในทะเบียนบ้าน) (A1)</h3> </label><br>
		&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" class="custom-control-input" id="del[<?php echo$i?>]" name='del[<?php echo$i?>]'>
		<label class="custom-control-label" for="del[<?php echo$i?>]">ลบ คนที่ <?php echo$i." ".$row1->a2?> </label><br>
		<label for="a2[<?php echo$i?>]">1. ชื่อ-นามสกุล (ให้ระบุคำนำหน้าชื่อลงไปด้วย) เช่น นาย,นาง,นางสาว,เด็กหญิง, เด็กชาย (A2)</label>
		<input type='text' name='a2[<?php echo$i?>]' id='a2[<?php echo$i?>]' placeholder='--ชื่อ-นามสกุล (ให้ระบุคำนำหน้าชื่อลงไปด้วย)--' value='<?php echo$row1->a2?>' class="form-control">
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="popid[<?php echo$i?>]">2. หมายเลขบัตรประจำตัวประชาชน</label>
		<input type='text'  id='popid[<?php echo$i?>]' name='popid[<?php echo$i?>]' placeholder="--หมายเลขบัตรประจำตัวประชาชน--" onkeyup="autoTab(this,1)" onkeypress="autoTab(this,1)" maxlength='17' value='<?php echo$row1->popid?>' class="form-control">
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="a3[<?php echo$i?>]">3. อายุ (ปี/เดือน ) (A3)</label>
		<input type='text' placeholder='--อายุ ปี/เดือน --' name='a3[<?php echo$i?>]' id='a3[<?php echo$i?>]' value='<?php echo$row1->a3?>' class="form-control">
		<div class="panel-body">
			<label>วันเกิด (ท่านสามารถพิมพ์วันเกิดได้เอง โดยมีรูปแบบดังนี้ ปีเดือนวัน เช่น 25230803)</label>
			<input type='hidden' name='searchdate' value='0'>
			<input id="inputdatepicker" class="datepicker form-control" data-date-format="yyymmdd" name='date1[<?php echo$i?>]' value='<?php echo$row1->a2_b?>'>
		</div>

	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="firstName">4. เพศ (A4)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a41[<?php echo$i?>]').checked=false;
						document.getElementById('a42[<?php echo$i?>]').checked=false;
				">
		<div class="custom-control custom-radio">
			<input id="a41[<?php echo$i?>]" name="a4[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a4=='1'){echo"checked";}?> >
			<label class="custom-control-label" for="a41[<?php echo$i?>]"> 1) ชาย </label>
		</div>
		<div class="custom-control custom-radio">
			<input id="a42[<?php echo$i?>]" name="a4[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a4=='2'){echo"checked";}?>>
			<label class="custom-control-label" for="a42[<?php echo$i?>]"> 2) หญิง</label>
		</div>
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
	<label>5. สถานะตามทะเบียนบ้าน (A5)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a51[<?php echo$i?>]').checked=false;
						document.getElementById('a52[<?php echo$i?>]').checked=false;
						document.getElementById('a53[<?php echo$i?>]').checked=false;
						document.getElementById('a54[<?php echo$i?>]').checked=false;
				">
	<div class="custom-control custom-radio">
		<input id="a51[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a5=='1'){echo"checked";}?> >
		<label class="custom-control-label" for="a51[<?php echo$i?>]">1) มีชื่อและอาศัยอยู่ </label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a52[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a5=='2'){echo"checked";}?>>
		<label class="custom-control-label" for="a52[<?php echo$i?>]">2) มีชื่อแต่ไม่อาศัย</label>
	</div>
	<div class="custom-control custom-radio">
		<input id="a53[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='3' <?php if($row1->a5=='3'){echo"checked";}?>>
		<label class="custom-control-label" for="a53[<?php echo$i?>]">3) ไม่มีชื่อแต่อาศัยอยู่</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a54[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='4' <?php if($row1->a5=='4'){echo"checked";}?>>
		<label class="custom-control-label" for="a54[<?php echo$i?>]">4) มีชื่อแต่เสียชีวิตแล้ว</label>
	</div>
</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
	<label>6. สุขภาพ (A6)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a61[<?php echo$i?>]').checked=false;
						document.getElementById('a62[<?php echo$i?>]').checked=false;
						document.getElementById('a63[<?php echo$i?>]').checked=false;
						document.getElementById('a64[<?php echo$i?>]').checked=false;
				">
	<div class="custom-control custom-radio">
		<input id="a61[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a6=='1'){echo"checked";}?> >
		<label class="custom-control-label" for="a61[<?php echo$i?>]">1) ปกติ </label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a62[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a6=='2'){echo"checked";}?>>
		<label class="custom-control-label" for="a62[<?php echo$i?>]">2) ป่วยเรื้อรังได้ที่ไม่ติดเตียง(เช่น หัวใจ เบาหวาน)</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a63[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='3' <?php if($row1->a6=='3'){echo"checked";}?>>
		<label class="custom-control-label" for="a63[<?php echo$i?>]">3) พิการพึ่งตนเองได้</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a64[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='4' <?php if($row1->a6=='4'){echo"checked";}?>>
		<label class="custom-control-label" for="a64[<?php echo$i?>]">4) ผู้ป่วยติดเตียง/พิการพึ่งตัวเองไม่ได้</label>
	</div>
</div>
</div>
<?php
if($row1->a2){
}//if($row1->a2){
	echo"<hr width='100%' size='40' color='blue' noshade>";
}//for($i=1;$i<=$count;$i++){

$count=$row->HHM+$row->PP;
for(;$i<=$count;$i++){//for($i=1;$i<=$count;$i++){
	$background=($background=='#FFEFFF')?"#EFFFFF":"#FFEFFF";
	$query1="select a2,a3,a4,a5,a6,popid,a2_b from survey_a1 where HC='$HC' and a1='$i' and survey_year='$survey_year' and survey_no='$survey_no'";
	$result1=$mysqli->query($query1);
	$row1=$result1->fetch_object();
?>
<br>
<input type='hidden' value='<?php echo$i?>' name='a1[<?php echo$i?>]'>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="a2[<?php echo$i?>]"><h3><font color="blue">คนที่ <?php echo$i?></font> (ไม่อยู่ในทะเบียนบ้าน) (A1)</h3> </label><br>
		&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" class="custom-control-input" id="del[<?php echo$i?>]" name='del[<?php echo$i?>]'>
		<label class="custom-control-label" for="del[<?php echo$i?>]">ลบ คนที่ <?php echo$i." ".$row1->a2?> </label><br>
		<label for="a2[<?php echo$i?>]">1. ชื่อ-นามสกุล (ให้ระบุคำนำหน้าชื่อลงไปด้วย) เช่น นาย,นาง,นางสาว,เด็กหญิง, เด็กชาย (A2)</label>
		<input type='text' name='a2[<?php echo$i?>]' id='a2[<?php echo$i?>]' placeholder='--ชื่อ-นามสกุล (ให้ระบุคำนำหน้าชื่อลงไปด้วย)--' value='<?php echo$row1->a2?>' class="form-control">
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="popid[<?php echo$i?>]">2. หมายเลขบัตรประจำตัวประชาชน</label>
		<input type='text'  id='popid[<?php echo$i?>]' name='popid[<?php echo$i?>]' placeholder="--หมายเลขบัตรประจำตัวประชาชน--" onkeyup="autoTab(this,1)" onkeypress="autoTab(this,1)" maxlength='17' value='<?php echo$row1->popid?>' class="form-control">
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="a3[<?php echo$i?>]">3. อายุ (ปี/เดือน ) (A3)</label>
		<input type='text' placeholder='--อายุ ปี/เดือน--' name='a3[<?php echo$i?>]' id='a3[<?php echo$i?>]' value='<?php echo$row1->a3?>' class="form-control">
		<div class="panel-body">
			<label>วันเกิด</label>
			<input type='hidden' name='searchdate' value='0'>
			<input id="inputdatepicker" class="datepicker form-control" data-date-format="yyymmdd" name='date1[<?php echo$i?>]' value='<?php echo$row1->a2_b?>'>
		</div>

	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
		<label for="firstName">4. เพศ (A4)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a41[<?php echo$i?>]').checked=false;
						document.getElementById('a42[<?php echo$i?>]').checked=false;
				">
		<div class="custom-control custom-radio">
			<input id="a41[<?php echo$i?>]" name="a4[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a4=='1'){echo"checked";}?> >
			<label class="custom-control-label" for="a41[<?php echo$i?>]"> 1) ชาย </label>
		</div>
		<div class="custom-control custom-radio">
			<input id="a42[<?php echo$i?>]" name="a4[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a4=='2'){echo"checked";}?>>
			<label class="custom-control-label" for="a42[<?php echo$i?>]"> 2) หญิง</label>
		</div>
	</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
	<label>5. สถานะตามทะเบียนบ้าน (A5)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a51[<?php echo$i?>]').checked=false;
						document.getElementById('a52[<?php echo$i?>]').checked=false;
						document.getElementById('a53[<?php echo$i?>]').checked=false;
						document.getElementById('a54[<?php echo$i?>]').checked=false;
				">
	<div class="custom-control custom-radio">
		<input id="a51[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a5=='1'){echo"checked";}?> >
		<label class="custom-control-label" for="a51[<?php echo$i?>]"> 1) มีชื่อและอาศัยอยู่ </label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a52[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a5=='2'){echo"checked";}?>>
		<label class="custom-control-label" for="a52[<?php echo$i?>]"> 2) มีชื่อแต่ไม่อาศัยอยู่</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a53[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='3' <?php if($row1->a5=='3'){echo"checked";}?>>
		<label class="custom-control-label" for="a53[<?php echo$i?>]"> 3) ไม่มีชื่อแต่อาศัยอยู่</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a54[<?php echo$i?>]" name="a5[<?php echo$i?>]" type="radio" class="custom-control-input" value='4' <?php if($row1->a5=='4'){echo"checked";}?>>
		<label class="custom-control-label" for="a54[<?php echo$i?>]"> 4) มีชื่อแต่เสียชีวิตแล้ว</label>
	</div>

</div>
</div>

<br>
<div class="row" style='border-style: dotted;border-width: 1px;background-color:<?php echo$background?>'>
	<div class="col-lg-12  mb-3">
	<label>6. สุขภาพ (A6)</label>
				<input type='button' value='reset' 
					onclick="
						document.getElementById('a61[<?php echo$i?>]').checked=false;
						document.getElementById('a62[<?php echo$i?>]').checked=false;
						document.getElementById('a63[<?php echo$i?>]').checked=false;
						document.getElementById('a64[<?php echo$i?>]').checked=false;
				">
	<div class="custom-control custom-radio">
		<input id="a61[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='1' <?php if($row1->a6=='1'){echo"checked";}?> >
		<label class="custom-control-label" for="a61[<?php echo$i?>]"> 1) ปกติ </label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a62[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='2' <?php if($row1->a6=='2'){echo"checked";}?>>
		<label class="custom-control-label" for="a62[<?php echo$i?>]"> 2) ป่วยเรื้อรังได้ที่ไม่ติดเตียง(เช่น หัวใจ เบาหวาน)</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a63[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='3' <?php if($row1->a6=='3'){echo"checked";}?>>
		<label class="custom-control-label" for="a63[<?php echo$i?>]"> 3) พิการพึ่งตนเองได้</label>
	</div>
    <div class="custom-control custom-radio">
		<input id="a64[<?php echo$i?>]" name="a6[<?php echo$i?>]" type="radio" class="custom-control-input" value='4' <?php if($row1->a6=='4'){echo"checked";}?>>
		<label class="custom-control-label" for="a64[<?php echo$i?>]"> 4) ผู้ป่วยติดเตียง/พิการพึ่งตัวเองไม่ได้</label>
	</div>
</div>
</div>
<?php
if($row1->a2){
}//if($row1->a2){
	echo"<hr width='100%' size='40' color='blue' noshade>";
}//for($i=1;$i<=$count;$i++){
$mysqli->close();
include('button.php');
?>
</form>

@code {

}
